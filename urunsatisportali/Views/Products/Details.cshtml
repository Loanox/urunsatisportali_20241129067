@model urunsatisportali.Models.Product
@using urunsatisportali.Helpers
@{
    ViewData["Title"] = "Ürün Detayları";
    Layout = "_AdminLayout";
}

<div class="page-header d-flex justify-content-between align-items-center">
    <h2><i class="bi bi-info-circle"></i> Ürün Detayları</h2>
    <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Geri</a>
</div>

<div class="row">
    <div class="col-md-4">
        <div class="card mb-3">
            <div class="card-header">
                <h5 class="mb-0">Ürün Görselleri</h5>
            </div>
            <div class="card-body">
                @if (Model.Images != null && Model.Images.Any())
                {
                    <div id="productImageCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            @for (int i = 0; i < Model.Images.Count; i++)
                            {
                                var image = Model.Images.ElementAt(i);
                                <div class="carousel-item @(i == 0 ? "active" : "")">
                                    <img src="@image.ImageUrl" class="d-block w-100" alt="Ürün görseli @(i + 1)"
                                        style="max-height: 400px; object-fit: contain;">
                                </div>
                            }
                        </div>
                        @if (Model.Images.Count > 1)
                        {
                            <button class="carousel-control-prev" type="button" data-bs-target="#productImageCarousel"
                                data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Önceki</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#productImageCarousel"
                                data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Sonraki</span>
                            </button>
                        }
                    </div>
                    <div class="mt-2 text-center">
                        <small class="text-muted">@Model.Images.Count görsel</small>
                    </div>
                }
                else
                {
                    <div class="text-center py-4">
                        <i class="bi bi-image text-muted" style="font-size: 3rem;"></i>
                        <p class="text-muted mt-2">Ürün görseli yok</p>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Ürün Bilgileri</h5>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-3">ID:</dt>
                    <dd class="col-sm-9">@Model.Id</dd>

                    <dt class="col-sm-3">Ad:</dt>
                    <dd class="col-sm-9">@Model.Name</dd>

                    <dt class="col-sm-3">SKU:</dt>
                    <dd class="col-sm-9">@Model.SKU</dd>

                    <dt class="col-sm-3">Kategori:</dt>
                    <dd class="col-sm-9">@(Model.Category?.Name ?? "Kategori yok")</dd>

                    <dt class="col-sm-3">Açıklama:</dt>
                    <dd class="col-sm-9">@(Model.Description ?? "N/A")</dd>

                    <dt class="col-sm-3">Fiyat:</dt>
                    <dd class="col-sm-9">@CurrencyHelper.FormatTurkishLira(Model.Price)</dd>

                    <dt class="col-sm-3">Stok Miktarı:</dt>
                    <dd class="col-sm-9">
                        <span class="badge @(Model.StockQuantity < 10 ? "bg-warning" : "bg-success")">
                            @Model.StockQuantity @Model.Unit
                        </span>
                    </dd>

                    <dt class="col-sm-3">Marka:</dt>
                    <dd class="col-sm-9">@(Model.Brand ?? "N/A")</dd>

                    <dt class="col-sm-3">Birim:</dt>
                    <dd class="col-sm-9">@Model.Unit</dd>

                    <dt class="col-sm-3">Durum:</dt>
                    <dd class="col-sm-9">
                        @if (Model.IsActive)
                        {
                            <span class="badge bg-success">Aktif</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">Pasif</span>
                        }
                    </dd>

                    <dt class="col-sm-3">Oluşturulma:</dt>
                    <dd class="col-sm-9">@Model.CreatedAt.ToString("dd.MM.yyyy HH:mm")</dd>

                    @if (Model.UpdatedAt.HasValue)
                    {
                        <dt class="col-sm-3">Güncellenme:</dt>
                        <dd class="col-sm-9">@Model.UpdatedAt.Value.ToString("dd.MM.yyyy HH:mm")</dd>
                    }
                </dl>
            </div>
        </div>
    </div>
</div>

